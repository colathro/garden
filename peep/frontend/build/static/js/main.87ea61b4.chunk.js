(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{302:function(t,e,s){},303:function(t,e,s){"use strict";s.r(e);var n=s(0),r=s.n(n),o=s(73),a=s.n(o),c=s(31),u=s.n(c),i=s(75),m=s(17),p=s(304),j=s(308),b=s(153),h=s(154),f=s(64),d=s(61),O=s(156),y=s(12),x=function(){var t=Object(n.useState)(),e=Object(m.a)(t,2),s=e[0],r=e[1];return Object(n.useEffect)((function(){fetch("api/water/week").then(function(){var t=Object(i.a)(u.a.mark((function t(e){var s;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(400!==e.status){t.next=2;break}return t.abrupt("return",null);case 2:return t.next=4,e.json();case 4:return s=t.sent,t.abrupt("return",s);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).then((function(t){null!=t&&r(function(t){var e=[];t.sort((function(t,e){return t.timestamp-e.timestamp}));var s=new Date(1e3*t[0].timestamp);s.setHours(s.getHours()+1);var n={sensor0:0,sensor0count:0,sensor1:0,sensor1count:0,sensor2:0,sensor2count:0,sensor3:0,sensor3count:0,timestamp:s};return t.forEach((function(t){if(new Date(1e3*t.timestamp)<n.timestamp)switch(t.sensor){case 0:n.sensor0count+=1,n.sensor0+=t.voltage;break;case 1:n.sensor1count+=1,n.sensor1+=t.voltage;break;case 2:n.sensor2count+=1,n.sensor2+=t.voltage;break;case 3:n.sensor3count+=1,n.sensor3+=t.voltage}else n.sensor0=n.sensor0/n.sensor0count,n.sensor1=n.sensor1/n.sensor1count,n.sensor2=n.sensor2/n.sensor2count,n.sensor3=n.sensor3/n.sensor3count,e.push(n),s=new Date(s.setHours(s.getHours()+1)),n={sensor0:0,sensor0count:0,sensor1:0,sensor1count:0,sensor2:0,sensor2count:0,sensor3:0,sensor3count:0,timestamp:s}})),e}(t))}))}),[]),Object(y.jsxs)(p.a,{width:800,height:400,data:s,children:[Object(y.jsx)(j.a,{strokeDasharray:"3 3"}),Object(y.jsx)(b.a,{dataKey:"timestamp"}),Object(y.jsx)(h.a,{}),Object(y.jsx)(f.a,{}),Object(y.jsx)(d.a,{}),Object(y.jsx)(O.a,{type:"monotone",dataKey:"sensor0",stroke:"#0FD65B"}),Object(y.jsx)(O.a,{type:"monotone",dataKey:"sensor1",stroke:"#A90FD6"}),Object(y.jsx)(O.a,{type:"monotone",dataKey:"sensor2",stroke:"#D60F2A"}),Object(y.jsx)(O.a,{type:"monotone",dataKey:"sensor3",stroke:"#E27B1F"})]})},l=function(){var t=Object(n.useState)(),e=Object(m.a)(t,2),s=e[0],r=e[1];return Object(n.useEffect)((function(){fetch("/api/temphumid/all").then(function(){var t=Object(i.a)(u.a.mark((function t(e){var s;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(400!==e.status){t.next=2;break}return t.abrupt("return",null);case 2:return t.next=4,e.json();case 4:return s=t.sent,t.abrupt("return",s);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).then((function(t){null!=t&&r(function(t){var e=[];t.sort((function(t,e){return t.timestamp-e.timestamp}));var s=new Date(1e3*t[0].timestamp);s.setHours(s.getHours()+1);var n={temp:0,tempcount:0,humidity:0,humiditycount:0,timestamp:s};return t.forEach((function(t){new Date(1e3*t.timestamp)<n.timestamp?(n.tempcount+=1,n.temp+=t.temp,n.humiditycount+=1,n.humidity+=t.humidity):(n.temp=n.temp/n.tempcount,n.humidity=n.humidity/n.humiditycount,e.push(n),s=new Date(s.setHours(s.getHours()+1)),n={temp:0,tempcount:0,humidity:0,humiditycount:0,timestamp:s})})),console.log(e),e}(t))}))}),[]),Object(y.jsxs)(p.a,{width:800,height:400,data:s,children:[Object(y.jsx)(j.a,{strokeDasharray:"3 3"}),Object(y.jsx)(b.a,{dataKey:"timestamp"}),Object(y.jsx)(h.a,{}),Object(y.jsx)(f.a,{}),Object(y.jsx)(d.a,{}),Object(y.jsx)(O.a,{type:"monotone",dataKey:"temp",stroke:"#FF5733",activeDot:{r:8}}),Object(y.jsx)(O.a,{type:"monotone",dataKey:"humidity",stroke:"#3386FF",activeDot:{r:8}})]})};var v=function(){return Object(y.jsxs)("div",{className:"app",children:[Object(y.jsx)(x,{}),Object(y.jsx)(l,{})]})};s(302);a.a.render(Object(y.jsx)(r.a.StrictMode,{children:Object(y.jsx)(v,{})}),document.getElementById("root"))}},[[303,1,2]]]);
//# sourceMappingURL=main.87ea61b4.chunk.js.map